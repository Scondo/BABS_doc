
# Публичный ключ/идентификатор

Для идентификации авторов, узлов, чатов и т.д. используется публичный ключ. Для минимизации занимаемого места при сохранении вариативности в BABS используется специальная обёртка. Основной рекомендацией является использование Ed25519, g

## Формат хранения идентификатора
| Номер блока | Длина в байтах | Содержимое |
| --- | --- | --- |
| 1 | 1 | Заголовочный байт (см. ниже) |
| 2 | var(1-n) | Длина ключа, сохранённая как varint (N) |
| 3 | var(1-m) | Если тип ключа описывается 11111 - значение типа ключа по таблице multicodec |
| 4 | N - m | Значение ключа |

### Заголовочный байт
| Бит | Значение |
| --- | --- | 
| 1 | Полнота: 0 - полноценный ключ; 1 - фрагмент ключа (первые байты) | 
| 2-3 | Резерв (должно быть всегда 00) |
| 4-8 | Тип ключа |

### Типы ключа 
- 00000 - RSA (сериализованный DER PKIX) 
- 00001 - Ed25519 
- 00010 - зарезервировано для Secp256k1, не должно использоваться 
- 00011 - зарезервировано для ECDSA, не должно использоваться  
- 11111 - тип описывается multicodec (допустимы только варианты с тэгом key), байт идентификации считается частью общей длины ключа  
- Остальное - резерв

## Описание
Данный формат предназначен для публичных ключей, но при использовании типа 11111 может также использоваться для описания приватных ключей (пока ждём RSA в мультикодеке).

Если первый бит установлен в 0 - ключ представлен полностью. Если первый бит установлен в 1 - представлены только первые байты ключа. Первые байты могут использоваться для идентификации автора в случае, когда можно однозначно их сопоставить с полным публичным ключом автора. В том числе: сообщение в групповой чат, где нет авторов, чьи ключи бы начинались с этих байт; отправка личного сообщения с узла где есть только один автор, заканчивающийся на эти байты; отправка через доску, если доске неизвестны другие авторы, начинающиеся на эти байты.


